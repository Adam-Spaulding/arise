{"version":3,"names":[],"mappings":"","sources":["controllers/auth.js"],"sourcesContent":["app.controller('AuthController', function($scope, $location, toaster, Auth, $cordovaOauth) {\r\nvar fbAppId = \"980336382079406\";\r\n  if(Auth.signedIn()) {\r\n    $location.path('/');\r\n  }\r\n\r\n\t$scope.register = function(user) {\r\n    Auth.register(user)\r\n      .then(function() {\r\n        toaster.pop('success', \"Registered successfully\");\r\n        $location.path('/');\r\n      }, function(err) {\r\n        errMessage(err);\r\n      });\r\n  };\r\n\r\n\t$scope.login = function(user) {\r\n     Auth.login(user)\r\n      .then(function() {\r\n             console.log(data)\r\n        toaster.pop('success', \"Logged in successfully\");\r\n        $location.path('/');\r\n      }, function(err) {\r\n        errMessage(err);\r\n      });\r\n\t};\r\n\r\n\t$scope.changePassword = function(user) {\r\n     Auth.changePassword(user)\r\n      .then(function() {\r\n\r\n        // Reset form\r\n        $scope.email = '';\r\n        $scope.oldPass = '';\r\n        $scope.newPass = '';\r\n\r\n        toaster.pop('success', \"Password changed successfully\");\r\n      }, function(err) {\r\n        errMessage(err);\r\n      });\r\n  };\r\n\r\n    $scope.fbSignup = function(){\r\n        if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) && screen.width <= 480){\r\n            $cordovaOauth.facebook(fbAppId, [\"email\", \"read_stream\", \"user_website\", \"user_location\", \"user_relationships\"]).then(function(result) {\r\n                //$localStorage.accessToken = result.access_token;\r\n                //$location.path(\"/profile\");\r\n                console.log(result)\r\n                alert(result)\r\n            }, function(error) {\r\n                alert(\"There was a problem signing in!  See the console for logs\");\r\n                console.log(error);\r\n            });\r\n        }else{\r\n            Auth.fbAuth(function() {\r\n                toaster.pop('success', 'Logged in successfully');\r\n                $location.path('/');\r\n            }, function(err) {\r\n                errMessage(err);\r\n            })\r\n            console.log('kaka')\r\n        }\r\n    }\r\n\tfunction errMessage(err) {\r\n\r\n    var msg = \"Unknown Error...\";\r\n\r\n    if(err && err.code) {\r\n      switch (err.code) {\r\n        case \"EMAIL_TAKEN\":\r\n          msg = \"This email has been taken\"; break;\r\n        case \"INVALID_EMAIL\":\r\n          msg = \"Invalid email\"; break;\r\n        case \"NETWORK_ERROR\":\r\n          msg = \"Network error\"; break;\r\n        case \"INVALID_PASSWORD\":\r\n          msg = \"Invalid password\"; break;\r\n        case \"INVALID_USER\":\r\n          msg = \"Invalid user\"; break;\r\n      }\r\n    }\r\n\r\n    toaster.pop('error', msg);\r\n  };\r\n      function thirdPartyLogin(provider) {\r\n        var deferred = $.Deferred();\r\n        rootRef.authWithOAuthPopup(provider, function (err, user) {\r\n            if (err) {\r\n                deferred.reject(err);\r\n            }\r\n            if (user) {\r\n                deferred.resolve(user);\r\n            }\r\n        });\r\n        return deferred.promise();\r\n    };\r\n\r\n});\r\n"],"file":"auth.js"}